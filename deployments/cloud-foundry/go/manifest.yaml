applications:
  - name: crypto-broker-go-client
    command: './go-client-cli --profile=KAT_SHA3_512 hash "Welcome CryptoBroker"'
    disk_quota: 256M
    instances: 1
    memory: 128M
    env:
      DOCKER_DEPLOYED: true
    buildpacks:
      - binary_buildpack
    health-check-type: process
    process_types:
      - web
    sidecars:
      - name: crypto-broker-server
        health-check-type: process
        process_types:
          - web
        command: 'CRYPTO_BROKER_PROFILES_DIR=$PWD ./cryptobroker-server'
      - name: crypto-broker-client-1
        health-check-type: process
        process_types:
          - web
        command: './go-client-cli --profile=sign-certificate-ecdsa-sha512 sign certificates/test-csr/test-client.csr certificates/test-ca/root-CA-ecdsa.pem certificates/test-ca/root-CA-ecdsa-private-key.pem'
      - name: crypto-broker-client-2
        health-check-type: process
        process_types:
          - web
        command: './go-client-cli --profile=sign-certificate-rsa-sha512 sign certificates/test-csr/test-client.csr certificates/test-ca/root-CA-rsa.pem certificates/test-ca/root-CA-rsa-private-key.pem'
